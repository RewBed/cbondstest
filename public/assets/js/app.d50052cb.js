(function(t){function e(e){for(var a,i,c=e[0],u=e[1],s=e[2],d=0,p=[];d<c.length;d++)i=c[d],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&p.push(r[i][0]),r[i]=0;for(a in u)Object.prototype.hasOwnProperty.call(u,a)&&(t[a]=u[a]);l&&l(e);while(p.length)p.shift()();return o.push.apply(o,s||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],a=!0,c=1;c<n.length;c++){var u=n[c];0!==r[u]&&(a=!1)}a&&(o.splice(e--,1),t=i(i.s=n[0]))}return t}var a={},r={app:0},o=[];function i(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=a,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(n,a,function(e){return t[e]}.bind(null,a));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/assets/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],u=c.push.bind(c);c.push=e,c=c.slice();for(var s=0;s<c.length;s++)e(c[s]);var l=u;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"464f":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("Products")],1)},o=[],i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"products"},[n("h1",[t._v("Продукты")]),n("el-row",[n("el-col",{attrs:{span:20}},[n("el-input",{model:{value:t.searchName,callback:function(e){t.searchName=e},expression:"searchName"}})],1),n("el-col",{attrs:{span:2}},[n("el-button",{attrs:{disabled:!t.searchName.length,type:"primary",icon:"el-icon-search"},on:{click:t.searchByName}})],1),n("el-col",{attrs:{span:2}},[n("el-button",{attrs:{type:"primary"},on:{click:t.openNewProductForm}},[t._v("Добавить")])],1)],1),n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.data.data}},[n("el-table-column",{attrs:{prop:"id",label:"id",width:"50"}}),n("el-table-column",{attrs:{prop:"name",label:"Имя"}}),n("el-table-column",{attrs:{prop:"price",label:"Цена",width:"200"}}),n("el-table-column",{attrs:{width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(n){return t.openEdit(e.row)}}}),n("el-button",{attrs:{type:"danger",icon:"el-icon-delete"},on:{click:function(n){return t.removeProduct(e.row)}}})]}}])})],1),n("el-pagination",{attrs:{background:"","hide-on-single-page":!0,"current-page":t.data.current_page,layout:"prev, pager, next","page-count":t.data.last_page},on:{"current-change":t.currentPageChange}}),n("el-dialog",{attrs:{title:"Редактирование товара",width:"30%",visible:t.editFormVisible},on:{"update:visible":function(e){t.editFormVisible=e}}},[n("div",{staticClass:"product__form"},[n("div",{staticClass:"product__form_row"},[n("div",{staticClass:"product__form_title"},[t._v("Наименование")]),n("el-input",{model:{value:t.activeItem.name,callback:function(e){t.$set(t.activeItem,"name",e)},expression:"activeItem.name"}})],1),n("div",{staticClass:"product__form_row"},[n("div",{staticClass:"product__form_title"},[t._v("Цена")]),n("el-input",{model:{value:t.activeItem.price,callback:function(e){t.$set(t.activeItem,"price",e)},expression:"activeItem.price"}})],1)]),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.editFormVisible=!1}}},[t._v("Отмена")]),n("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v(" "+t._s(t.activeItem.id?"Сохранить":"Добавить")+" ")])],1)])],1)},c=[],u=(n("4160"),n("a434"),n("b64b"),n("159b"),n("b0c0"),n("d3b7"),n("d4ec")),s=n("bee2"),l=n("bc3a"),d=n.n(l),p=function(){function t(){Object(u["a"])(this,t)}return Object(s["a"])(t,null,[{key:"getEmpty",value:function(){return{id:0,name:"",price:0}}},{key:"list",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new Promise((function(n,a){var r={params:{page:t}};e&&(r.params.name=e),d.a.get("/api/products",r).then((function(t){n(t.data)})).catch((function(){return a()}))}))}},{key:"save",value:function(t){return new Promise((function(e,n){d.a.post("/api/product/save",t).then((function(t){e(t.data)})).catch((function(t){return n(t.response.data)}))}))}},{key:"remove",value:function(t){return new Promise((function(e,n){d.a.delete("/api/product/".concat(t.id,"/remove")).then((function(t){e(t.data)})).catch((function(t){return n(t.response.data)}))}))}}]),t}(),f=p,m={name:"Products",mounted:function(){var t=this;f.list().then((function(e){return t.data=e}))},data:function(){return{data:{current_page:1,data:[],total:50,to:25,lastPage:1},editFormVisible:!1,activeItem:f.getEmpty(),searchName:""}},watch:{searchName:function(t){var e=this;t||f.list(1).then((function(t){return e.data=t}))}},methods:{searchByName:function(){var t=this;f.list(1,this.searchName).then((function(e){return t.data=e}))},currentPageChange:function(t){var e=this;f.list(t).then((function(t){return e.data=t}))},openEdit:function(t){this.activeItem=t,this.editFormVisible=!0},openNewProductForm:function(){this.activeItem=f.getEmpty(),this.editFormVisible=!0},removeProduct:function(t){var e=this;this.$confirm("Удалить").then((function(){f.remove(t).then((function(){e.data.data.forEach((function(n,a){n.id===t.id&&e.data.data.splice(a,1)}))})).catch((function(){e.$notify.error({title:"Ошибка",message:"Не удалось удалить запись"})}))}))},save:function(){var t=this;f.save(this.activeItem).then((function(e){t.activeItem.id||(t.activeItem.id=e.id,t.data.data.push(t.activeItem)),t.$notify.success("Сохранено")})).catch((function(e){var n="";Object.keys(e.errors).forEach((function(t){n=e.errors[t][0]})),t.$notify.error({title:e.message,message:n})}))}}},v=m,h=(n("b124"),n("2877")),b=Object(h["a"])(v,i,c,!1,null,"6d3baea0",null),g=b.exports,y={name:"App",components:{Products:g}},_=y,w=Object(h["a"])(_,r,o,!1,null,null,null),P=w.exports,k=n("5c96"),O=n.n(k),j=(n("0fae"),n("dccd")),I=n.n(j);a["default"].use(O.a,{locale:I.a}),a["default"].config.productionTip=!1,new a["default"]({render:function(t){return t(P)}}).$mount("#app")},b124:function(t,e,n){"use strict";n("464f")}});
//# sourceMappingURL=app.d50052cb.js.map